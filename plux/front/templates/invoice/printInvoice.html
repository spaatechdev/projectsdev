{% load static %}
{% load mathfilters %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <script src="{% static 'js/jquery.min.js' %}"></script>
  <title>Invoice</title>
  <style>
    .clearfix:after {
      content: "";
      display: table;
      clear: both;
    }
  </style>
</head>

<body style="position: relative; width: 25cm; height: 29.7cm; margin: 0 auto; color: #555555;
  background-color: #FFFFFF; font-family: Arial, sans-serif; font-size: 14px; font-family: SourceSansPro;">
  <header style=" padding: 10px 0; margin-bottom: 20px;
    border-bottom: 1px solid #AAAAAA;" class="clearfix">
    <div style="float: left; margin-top: 8px;">
      <img src="{% static 'invoice/cpc.png' %}">
    </div>
    <div style="float: right; text-align: right;">
      <h2 style="font-size: 1.4em; font-weight: normal; margin: 0;">Chakda Ply Centre</h2>
      <div>Lalpur, Rathtala, Chakdaha - 741222,<br />
        Near 50 No Rail Gate.</div>
      <div>+91 9732856236</div>
      <div><a style="color: #0087C3; text-decoration: none;"
          href="mailto:company@example.com">chakdaplycentre@gmail.com</a></div>
    </div>
  </header>

  <main>
    <div style="content: ""; display: table; clear: both;">
      <div style="padding-left: 6px; border-left: 6px solid #0087C3;
        float: left;">
        <div style="color: #777777;">INVOICE TO:</div>
        <h2 style="font-size: 1.4em; font-weight: normal; margin: 0;">{{invoiceOrder.customer.customer_name}}</h2>
        <div>{{invoiceOrder.customer.address_1}}<br />
          {{invoiceOrder.customer.address_2}}, {{invoiceOrder.customer.city.name}}, {{invoiceOrder.customer.state.name}}
          {{invoiceOrder.customer.pin}}.
        </div>
        <div style="color: #0087C3; text-decoration: none;"><a
            href="mailto:{{invoiceOrder.customer.contact_email}}">{{invoiceOrder.customer.contact_email}}</a>
        </div>
      </div>
      <div style="float: right; text-align: right; padding-right: 6px;">
        <div>INVOICE No: {{invoiceOrder.invoice_number}}</div>
        <div class="date">Date of Invoice: {{invoiceOrder.invoice_date}}</div>
        {% if invoiceOrder.customer.gst_no %}
        <div class="date">GSTIN No: {{invoiceOrder.customer.gst_no}}</div>
        {% endif %}
      </div>
    </div>
    <table border="1" cellspacing="0" cellpadding="0" style="width: 100%; border-collapse: collapse;
    border-spacing: 0; margin-bottom: 20px;">
      <thead>
        <tr style="background-color: #57B223; color: #FFFFFF;">
          <th>SL No:</th>
          <th>Product</th>
          <th>Dimension</th>
          <th>Sq. Ft.</th>
          <th>Qty</th>
          <th>Price/Unite</th>
          <th>TOTAL</th>
          {% if invoiceOrder.customer.gst_no %}
          <th>GST</th>
          <th>GST Price</th>
          {% endif %}
        </tr>
      </thead>

      <tbody>
        {% for invoicedetail in invoiceOrder.invoicedetails_set.all %}
        <tr>
          <td>{{forloop.counter}}</td>
          <td>{{invoicedetail.item.description}}</td>
          <th>{{invoicedetail.item.ply_dimension.description}}</th>
          <th>{{invoicedetail.item.ply_dimension.square_ft|floatformat:"0"}}</th>
          <th style="background-color: #DDDDDD;">{{invoicedetail.quantity|floatformat:"0"}}</th>
          <th>{{invoicedetail.item.unit_price}}</th>
          <th>{{invoicedetail.invoice_item_value}}</th>
          {% if invoiceOrder.customer.gst_no %}
          <th>{{invoicedetail.item.gst_percentage}}%</th>
          <th>{{invoicedetail.invoice_item_gst_value}}</th>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>

      <tfoot>
        <tr>
          <td colspan="6"></td>
          <td colspan="2" style="background-color: #57B223; color: #FFFFFF; text-align: center;">SUBTOTAL</td>
          <td style="background-color: #DDDDDD; text-align: center;">{{invoiceOrder.invoice_total}}</td>
        </tr>
        {% if invoiceOrder.customer.gst_no %}
        <tr>
          <td colspan="6"></td>
          <td colspan="2" style="text-align: center;">CGST 9%</td>
          <td style="background-color: #DDDDDD; text-align: center;">{{invoiceOrder.invoice_gst_total}}</td>
        </tr>
        <tr>
          <td colspan="6"></td>
          <td colspan="2" style="text-align: center;">SGST 9%</td>
          <td style="background-color: #DDDDDD; text-align: center;">0.00</td>
        </tr>
        {% endif %}
        <tr>
          <td colspan="6"></td>
          <td colspan="2" style="text-align: center">PREVIOUS DUE</td>
          <td style="background-color: #DDDDDD; text-align: center;">0.00</td>
        </tr>
        <tr>
          <td colspan="6"></td>
          <td colspan="2" style="text-align: center">CARRYING COST</td>
          <td style="background-color: #DDDDDD; text-align: center;">0.00</td>
        </tr>
        <tr style="background-color: #57B223; color: #FFFFFF;">
          <td colspan="6"></td>
          <td colspan="2" style="text-align: center">GRAND TOTAL</td>
          {% if invoiceOrder.customer.gst_no %}
          <td style="text-align: center;">{{invoiceOrder.invoice_total|add:invoiceOrder.invoice_gst_total}}</td>
          {% else %}
          <td style="text-align: center;">{{invoiceOrder.invoice_total}}</td>
          {% endif %}
        </tr>
      </tfoot>
    </table>
    <div style="font-size: 2em; margin-bottom: 50px;">Thank you!</div>
    <div style="padding-left: 6px; border-left: 6px solid #0087C3;  ">
      <div>Terms:</div>
      {% for invoiceterm in invoiceOrder.invoiceterms_set.all %}
      <div style="font-size: 1.2em;">{{invoiceterm.term.description}}</div>
      {% endfor %}
    </div>
  </main>
  <footer style="color: #777777; width: 100%; height: 30px;  position: absolute;
    bottom: 0; border-top: 1px solid #AAAAAA; padding: 8px 0; text-align: center;">
    Invoice was created on a computer and is valid without the signature and seal.
  </footer>
</body>

<script>
  $(document).ready(function () {
    window.print();
  });
</script>

</html>